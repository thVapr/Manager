{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"./article-preview.component\";\nfunction ArticleListComponent_app_article_preview_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-article-preview\", 5);\n  }\n  if (rf & 2) {\n    const article_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"article\", article_r2);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"active\": a0\n  };\n};\nfunction ArticleListComponent_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 6);\n    i0.ɵɵlistener(\"click\", function ArticleListComponent_li_7_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const pageNumber_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.setPageTo(pageNumber_r3));\n    });\n    i0.ɵɵelementStart(1, \"a\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const pageNumber_r3 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(2, _c0, pageNumber_r3 === ctx_r1.currentPage));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pageNumber_r3);\n  }\n}\nexport class ArticleListComponent {\n  constructor(articlesService) {\n    this.articlesService = articlesService;\n    this.loading = false;\n    this.currentPage = 1;\n    this.totalPages = [1];\n  }\n  set config(config) {\n    if (config) {\n      this.query = config;\n      this.currentPage = 1;\n      this.runQuery();\n    }\n  }\n  setPageTo(pageNumber) {\n    this.currentPage = pageNumber;\n    this.runQuery();\n  }\n  runQuery() {\n    this.loading = true;\n    this.results = [];\n    // Create limit and offset filter (if necessary)\n    if (this.limit) {\n      this.query.filters.limit = this.limit;\n      this.query.filters.offset = this.limit * (this.currentPage - 1);\n    }\n    this.articlesService.query(this.query).subscribe(data => {\n      this.loading = false;\n      this.results = data.articles;\n      // Used from http://www.jstips.co/en/create-range-0...n-easily-using-one-line/\n      this.totalPages = Array.from(new Array(Math.ceil(data.articlesCount / this.limit)), (val, index) => index + 1);\n    });\n  }\n}\nArticleListComponent.ɵfac = function ArticleListComponent_Factory(t) {\n  return new (t || ArticleListComponent)(i0.ɵɵdirectiveInject(i1.ArticlesService));\n};\nArticleListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ArticleListComponent,\n  selectors: [[\"app-article-list\"]],\n  inputs: {\n    limit: \"limit\",\n    config: \"config\"\n  },\n  decls: 8,\n  vars: 5,\n  consts: [[3, \"article\", 4, \"ngFor\", \"ngForOf\"], [1, \"app-article-preview\", 3, \"hidden\"], [3, \"hidden\"], [1, \"pagination\"], [\"class\", \"page-item\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"article\"], [1, \"page-item\", 3, \"ngClass\", \"click\"], [1, \"page-link\"]],\n  template: function ArticleListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ArticleListComponent_app_article_preview_0_Template, 1, 1, \"app-article-preview\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵtext(2, \" Loading articles...\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 1);\n      i0.ɵɵtext(4, \" No articles are here... yet.\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"nav\", 2)(6, \"ul\", 3);\n      i0.ɵɵtemplate(7, ArticleListComponent_li_7_Template, 3, 4, \"li\", 4);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngForOf\", ctx.results);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hidden\", !ctx.loading);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", ctx.loading || ctx.results.length);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", ctx.loading || ctx.totalPages.length <= 1);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.totalPages);\n    }\n  },\n  dependencies: [i2.NgClass, i2.NgForOf, i3.ArticlePreviewComponent],\n  styles: [\".page-link[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2hhcmVkL2FydGljbGUtaGVscGVycy9hcnRpY2xlLWxpc3QuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGVBQWU7QUFDakIiLCJzb3VyY2VzQ29udGVudCI6WyIucGFnZS1saW5rIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;IAAAA,yCAGsB;;;;IADpBA,oCAAmB;;;;;;;;;;;IAgBjBA,6BAGkC;IAAhCA;MAAA;MAAA;MAAA;MAAA,OAASA,8CAAqB;IAAA,EAAC;IAE/BA,4BAAsB;IAAAA,YAAgB;IAAAA,iBAAI;;;;;IAJ1CA,0FAAkD;IAI5BA,eAAgB;IAAhBA,mCAAgB;;;ACb5C,OAAM,MAAOC,oBAAoB;EAC/BC,YACUC,eAAgC;IAAhC,oBAAe,GAAfA,eAAe;IAezB,YAAO,GAAG,KAAK;IACf,gBAAW,GAAG,CAAC;IACf,eAAU,GAAkB,CAAC,CAAC,CAAC;EAhB5B;EAGH,IACIC,MAAM,CAACA,MAAyB;IAClC,IAAIA,MAAM,EAAE;MACV,IAAI,CAACC,KAAK,GAAGD,MAAM;MACnB,IAAI,CAACE,WAAW,GAAG,CAAC;MACpB,IAAI,CAACC,QAAQ,EAAE;;EAEnB;EAQAC,SAAS,CAACC,UAAU;IAClB,IAAI,CAACH,WAAW,GAAGG,UAAU;IAC7B,IAAI,CAACF,QAAQ,EAAE;EACjB;EAEAA,QAAQ;IACN,IAAI,CAACG,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,OAAO,GAAG,EAAE;IAEjB;IACA,IAAI,IAAI,CAACC,KAAK,EAAE;MACd,IAAI,CAACP,KAAK,CAACQ,OAAO,CAACD,KAAK,GAAG,IAAI,CAACA,KAAK;MACrC,IAAI,CAACP,KAAK,CAACQ,OAAO,CAACC,MAAM,GAAK,IAAI,CAACF,KAAK,IAAI,IAAI,CAACN,WAAW,GAAG,CAAC,CAAE;;IAGpE,IAAI,CAACH,eAAe,CAACE,KAAK,CAAC,IAAI,CAACA,KAAK,CAAC,CACrCU,SAAS,CAACC,IAAI,IAAG;MAChB,IAAI,CAACN,OAAO,GAAG,KAAK;MACpB,IAAI,CAACC,OAAO,GAAGK,IAAI,CAACC,QAAQ;MAE5B;MACA,IAAI,CAACC,UAAU,GAAGC,KAAK,CAACC,IAAI,CAAC,IAAID,KAAK,CAACE,IAAI,CAACC,IAAI,CAACN,IAAI,CAACO,aAAa,GAAG,IAAI,CAACX,KAAK,CAAC,CAAC,EAAE,CAACY,GAAG,EAAEC,KAAK,KAAKA,KAAK,GAAG,CAAC,CAAC;IAChH,CAAC,CAAC;EACJ;;AA5CWxB,oBAAoB;mBAApBA,oBAAoB;AAAA;AAApBA,oBAAoB;QAApBA,oBAAoB;EAAAyB;EAAAC;IAAAf;IAAAR;EAAA;EAAAwB;EAAAC;EAAAC;EAAAC;IAAA;MDVjC/B,qGAGsB;MAEtBA,8BACsB;MACpBA,sCACF;MAAAA,iBAAM;MAENA,8BACuC;MACrCA,+CACF;MAAAA,iBAAM;MAENA,8BAAkD;MAG9CA,mEAOK;MAEPA,iBAAK;;;MA1BeA,qCAAU;MAK9BA,eAAmB;MAAnBA,qCAAmB;MAKnBA,eAAoC;MAApCA,0DAAoC;MAIjCA,eAA4C;MAA5CA,kEAA4C;MAKpBA,eAAa;MAAbA,wCAAa","names":["i0","ArticleListComponent","constructor","articlesService","config","query","currentPage","runQuery","setPageTo","pageNumber","loading","results","limit","filters","offset","subscribe","data","articles","totalPages","Array","from","Math","ceil","articlesCount","val","index","selectors","inputs","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\vaprm\\Projects\\Manager\\ManagerView\\src\\app\\shared\\article-helpers\\article-list.component.html","C:\\Users\\vaprm\\Projects\\Manager\\ManagerView\\src\\app\\shared\\article-helpers\\article-list.component.ts"],"sourcesContent":["<app-article-preview\n  *ngFor=\"let article of results\"\n  [article]=\"article\">\n</app-article-preview>\n\n<div class=\"app-article-preview\"\n  [hidden]=\"!loading\">\n  Loading articles...\n</div>\n\n<div class=\"app-article-preview\"\n  [hidden]=\"loading || results.length\">\n  No articles are here... yet.\n</div>\n\n<nav [hidden]=\"loading || totalPages.length <= 1\">\n  <ul class=\"pagination\">\n\n    <li class=\"page-item\"\n      [ngClass]=\"{'active': pageNumber === currentPage}\"\n      *ngFor=\"let pageNumber of totalPages\"\n      (click)=\"setPageTo(pageNumber)\">\n\n      <a class=\"page-link\" >{{ pageNumber }}</a>\n\n    </li>\n\n  </ul>\n</nav>\n","import { Component, Input } from '@angular/core';\n\nimport { Article, ArticleListConfig } from '../models';\nimport { ArticlesService } from '../services';\n\n@Component({\n  selector: 'app-article-list',\n  styleUrls: ['article-list.component.css'],\n  templateUrl: './article-list.component.html'\n})\nexport class ArticleListComponent {\n  constructor (\n    private articlesService: ArticlesService\n  ) {}\n\n  @Input() limit: number;\n  @Input()\n  set config(config: ArticleListConfig) {\n    if (config) {\n      this.query = config;\n      this.currentPage = 1;\n      this.runQuery();\n    }\n  }\n\n  query: ArticleListConfig;\n  results: Article[];\n  loading = false;\n  currentPage = 1;\n  totalPages: Array<number> = [1];\n\n  setPageTo(pageNumber) {\n    this.currentPage = pageNumber;\n    this.runQuery();\n  }\n\n  runQuery() {\n    this.loading = true;\n    this.results = [];\n\n    // Create limit and offset filter (if necessary)\n    if (this.limit) {\n      this.query.filters.limit = this.limit;\n      this.query.filters.offset =  (this.limit * (this.currentPage - 1));\n    }\n\n    this.articlesService.query(this.query)\n    .subscribe(data => {\n      this.loading = false;\n      this.results = data.articles;\n\n      // Used from http://www.jstips.co/en/create-range-0...n-easily-using-one-line/\n      this.totalPages = Array.from(new Array(Math.ceil(data.articlesCount / this.limit)), (val, index) => index + 1);\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}